
<html
<body>

<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="sleepless.js"></script>
<script src="mvc.js"></script>


<input type=text name="Title" ><br>
<textarea placeholder="Description"></textarea><br>
<input type=number id="Age" ><br>
<select title=Flavor>
	<option></option>
	<option>Foo</option>
	<option>Bar</option>
</select><br>
Are you happy? <input type=checkbox name="Are you happy?" ><br>

Radio Station: 
	<input type=radio name="Station" value=WKRP> WKRP
	&nbsp;&nbsp;&nbsp;
	<input type=radio name="Station" value=KUOW> KUOW
	&nbsp;&nbsp;&nbsp;
	<input type=radio name="Station" value=KCRAP> KCRAP

<p>
Organs:
	<input type=checkbox name="Organs,Kidney"> Kidney 
	&nbsp;
	<input type=checkbox name="Organs,Lung"> Lung 
	&nbsp;
	<input type=checkbox name="Organs,Heart"> Heart 

<p>
Pets:<br>
Dogs:
	<input type=checkbox name="pets,dogs,spot"> Spot 
	&nbsp;
	<input type=checkbox name="pets,dogs,rover"> Rover 
Cats:
	<input type=checkbox name="pets,cats,mittens"> Mittens 
	&nbsp;
	<input type=checkbox name="pets,cats,stink"> Stink 

<p>
Date: <input type=text data=isdate name="a_date">
<hr>

<script>

	var data = {
		title: "",
		description: "",
		age: 0,
		flavor: "",
		are_you_happy: false,
		station: "",
		organs: {
			kidney: false,
			lung: false,
			heart: false,
		},
		pets: {
			dogs: { spot: false, rover: false, },
			cats: { mittens: false, stink: false, },
		},
		a_date: "",
		glorp: 7,
	};

	// coming out of model, and going into UI
	set_hook = function(e, v) {
		if($(e).attr("data") == "isdate") {
			return ts2us_mdy(v);
		}
		return v;
	}

	// coming out of UI, and going into model
	get_hook = function(e, v) {
		if($(e).attr("data") == "isdate") {
			return us2ts(v);
		}
		return v;
	}

	load = function() {
		data = JSON.parse(localStorage.getItem("data"));
		MVC.toUI(data, set_hook, get_hook);
	}

	save = function() {
		var json = JSON.stringify(data);
		localStorage.setItem("data", json);
		log("saved: "+json);
	}

	MVC.toUI(data, set_hook, get_hook);

</script>

<input type=button value=Load onclick="load()">
<input type=button value=Save onclick="save()">

